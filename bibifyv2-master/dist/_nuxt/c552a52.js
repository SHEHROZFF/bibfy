(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{349:function(e,t,r){"use strict";var n=r(16),o=r(13),c=(r(26),r(47),r(38),r(65),r(53),r(45),r(46),r(35),r(8),r(29),r(67),r(66),r(68),r(0)),l=r(387),f=r.n(l);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=new c.a({data:function(){return{type:"book",manualCite:!1,sources:[],currentSource:{authors:[]},currentMessageOpen:!1,currentMessage:{type:"none",text:""},citationTypes:[{label:"Book",type:"book"},{label:"Website",type:"webpage"},{label:"Journal",type:"article-journal"},{label:"Article",type:"article"},{label:"Podcast",type:"song"},{label:"Personal Communication",type:"personal_communication"},{label:"Speech",type:"speech"},{label:"Broadcast",type:"broadcast"},{label:"Report",type:"report"}],fields:[],currentCitation:"",citationList:[],showCitationList:[],citationTimeout:null,citationLoading:!1,citationLoadingTimeout:null,citations:[],currentSearch:"",currentCitationFile:"",currentStyle:0}},watch:{currentCitationFile:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentSource.title){t.next=3;break}return t.next=3,e.getNewCitation();case 3:case"end":return t.stop()}}),t)})))()},type:function(){"book"!==this.type&&"webpage"!==this.type&&(this.currentMessage={type:"warning",text:"This citation type is in beta. Use with caution."})},currentMessage:function(){"none"!==this.currentMessage.type?this.currentMessageOpen=!0:this.currentMessageOpen=!1}},methods:{fetchFields:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="auto"!==e.type?e.type:"book",t.next=3,fetch("".concat("https://api.bibify.org/api","/fields/").concat(r));case 3:if(!(n=t.sent).ok){t.next=10;break}return t.next=7,n.json();case 7:e.fields=t.sent,t.next=12;break;case 10:console.error("Field fetch failed!"),h.currentMessage={type:"error",text:"Error: could not fetch citation fields. Backend is probably down; try later."};case 12:e.fields=e.fields.map((function(e){return"issued"===e.field?(e.label="Publish Date",e.field="date"):"publisher-place"===e.field&&(e.label="Publisher Location"),e}));case 13:case"end":return t.stop()}}),t)})))()},getNewCitation:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var source,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return source=d(d({},e.currentSource),{},{style:e.currentCitationFile||"modern-language-association.csl",type:"auto"!==e.type?e.type:"book"}),e.citationLoading=!1,e.citationLoadingTimeout=setTimeout((function(){e.citationLoading=!0}),1e3),console.log(source),t.next=6,fetch("".concat("https://api.bibify.org/api","/cite?").concat(f.a.stringify(source,{format:"RFC3986"})));case 6:if(!(r=t.sent).ok){t.next=14;break}return t.next=10,r.json();case 10:n=t.sent,e.currentCitation=n[0],t.next=16;break;case 14:console.error("cite failed",r),h.currentMessage={type:"error",text:"Error: could not fetch citation. Backend is probably down; try later."};case 16:clearTimeout(e.citationLoadingTimeout),e.citationLoading=!1;case 18:case"end":return t.stop()}}),t)})))()}},computed:{infoFields:function(){var e="auto"!==this.type?this.type:"book";return this.fields.filter((function(t){switch(t.field){case"title":return!0;case"edition":case"volume":return"book"===e;case"URL":return"webpage"===e;default:return!1}}))},publisherFields:function(){return this.fields.filter((function(e){switch(e.field){case"publisher":case"publisher-place":case"date":return!0;default:return!1}}))},currentMessageType:function(){return"none"===this.currentMessage.type?"success":this.currentMessage.type},otherFields:function(){var e=this;return this.fields.filter((function(t){return!(e.publisherFields.includes(t)||e.infoFields.includes(t))}))}}});window.__state,t.a=h},354:function(e,t,r){!function(e){"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],u=!0,a=!1;try{for(r=r.call(e);!(u=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);u=!0);}catch(e){a=!0,i=e}finally{try{u||null==r.return||r.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){var n,i,o,u,a=null,c="number"==typeof t?t:(i=(n=r(String(t).split(/(ms|s)/i),2))[0],u=void 0===(o=n[1])?"ms":o,Number(i)*{ms:1,s:1e3}[u]),l=function(){for(var t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=function(){a=null,e.apply(t,n)};clearTimeout(a),(a=setTimeout(o,c))||e.apply(this,n)};return l.cancel=function(){clearTimeout(a),a=null},l}function o(e){return e.map((function(e){return e.toLowerCase()}))}function u(e,t){var r,n=e?e["debounce-events"]:[];return n&&n.length>0?Array.isArray(n)?o(n):o(n.split(",")):o((r=t,Array.isArray(r)?r:null==r?[]:[r]))}function a(e){return""===e}function c(e,t){return"Enter"===e&&(!t.lock||t.unlock)}function l(e,t,r){return a(e)&&r.fireonempty&&("Enter"===t||" "===t)}function f(e){var t=r(String(e).split("."),1)[0];return Number(t)>=3?"mounted":"bind"}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.lock,o=void 0!==n&&n,s=r.listenTo,y=void 0===s?"keyup":s,d=r.defaultTime,h=void 0===d?"300ms":d,m=r.fireOnEmpty,p=void 0!==m&&m,b=r.cancelOnEmpty,g=void 0!==b&&b,v=r.trim,w=void 0!==v&&v;return t({},f(e),(function(e,t,r){var n=t.value,f=t.arg,s=void 0===f?h:f,d=t.modifiers,m=Object.assign({lock:o,trim:w,fireonempty:p,cancelonempty:g},d),b=u(r.data.attrs,y),v=i((function(e){n(e.target.value,e)}),s);function O(e){var t=m.trim?e.target.value.trim():e.target.value;a(t)&&m.cancelonempty?v.cancel():c(e.key,m)||l(t,e.key,m)?(v.cancel(),n(e.target.value,e)):v(e)}b.forEach((function(t){e.addEventListener(t,O)}))}))}s();var y={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.directive("debounce",s(e.version,t))}};e.debounce=i,e.default=y,e.getDirective=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)},388:function(e,t){},423:function(e,t,r){e.exports={}},453:function(e,t,r){"use strict";r(423)},479:function(e,t,r){"use strict";r.r(t);var n=r(443),o=r(441),c=r(528),l=(r(23),r(171),r(16)),f=r(13),y=(r(68),r(26),r(47),r(53),r(52),r(38),r(45),r(46),r(35),r(8),r(245),r(43),r(130),r(79),r(29),r(66),r(0)),d=r(354),h=r.n(d),m=r(349);r(59),r(69),r(58),r(27),r(42),r(44);function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,a){if(e){if("string"==typeof e)return w(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function w(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=Array(a);t<a;t++)r[t]=e[t];return r}var O=function(e){var t,r=[],n=v(e||[]);try{for(n.s();!(t=n.n()).done;){var o=t.value;1===o.split(" ").length?r.push({last:o.split(" ")[0],type:"Person"}):2===o.split(" ").length?r.push({first:o.split(" ")[0],last:o.split(" ")[1],type:"Person"}):r.push({full:o,type:"Organization"})}}catch(e){n.e(e)}finally{n.f()}return r};function k(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,a){if(e){if("string"==typeof e)return x(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function x(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=Array(a);t<a;t++)r[t]=e[t];return r}var S=function(e){var t,r=[],n=k(e||[]);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.family?r.push({last:o.family,first:o.given,type:"Person"}):r.push({last:"Author<UNRECOGNIZED_FORMAT>",type:"Organization"})}}catch(e){n.e(e)}finally{n.f()}return r};function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}y.a.use(h.a);var A={data:function(){return{search:"",searchHint:"Start typing a book title or paste in a URL",sourceLoading:!1,sourceLoadingTimeout:null}},computed:{state:function(){return m.a}},methods:{typingHandle:function(){this.searchHint="Waiting for you to stop typing...",this.sourceLoading=!1},handleURLKey:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark((function t(){var data,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.search){t.next=2;break}return t.abrupt("return");case 2:if(e.sourceLoadingTimeout=setTimeout((function(){e.sourceLoading=!0}),1e3),data={},r=new RegExp("\\b(10[.][0-9]{4,}(?:[.][0-9]+)*/(?:(?![\"&'<>])\\S)+)\\b"),"",!(n=e.search.match(r))){t.next=21;break}return e.searchHint="Searching for DOI...",t.prev=8,t.next=11,e.$axios.$get("".concat("https://api.bibify.org/api","/doi?url=").concat(n[0]));case 11:data=t.sent,m.a.type=data.type,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),m.a.currentMessage={type:"error",text:"Error: could not fetch DOI autocitation; check your DOI and try again later."};case 18:data&&(m.a.currentSource=L(L({},data),{},{license:void 0,funder:void 0,reference:void 0,author:void 0,access_date:(new Date).toISOString().slice(0,10),source_type:"website",url:data.URL,authors:S(data.author),idx:0}),console.log(m.a.currentSource),m.a.sources=[]),t.next=48;break;case 21:if(!e.search.startsWith("http://")&&!e.search.startsWith("https://")){t.next=36;break}return e.searchHint="Searching for URL...",m.a.type="webpage",t.prev=24,t.next=27,e.$axios.$get("".concat("https://api.bibify.org/api","/website?url=").concat(e.search));case 27:data=t.sent,t.next=33;break;case 30:t.prev=30,t.t1=t.catch(24),m.a.currentMessage={type:"error",text:"Error: could not fetch website autocitation; check your URL and try again later."};case 33:data&&(m.a.currentSource=L(L({},data),{},{access_date:(new Date).toISOString().slice(0,10),source_type:"website",url:data.URL,authors:O(data.authors),idx:0}),m.a.sources=[]),t.next=48;break;case 36:return e.searchHint="Searching for book...",m.a.type="book",t.prev=38,t.next=41,e.$axios.$get("".concat("https://api.bibify.org/api","/books?q=").concat(e.search));case 41:data=t.sent,t.next=47;break;case 44:t.prev=44,t.t2=t.catch(38),m.a.currentMessage={type:"error",text:"Error: could not fetch book autocitation; try again later."};case 47:data&&(m.a.sources=data.map((function(source,e){return L(L({},source),{},{idx:e,access_date:(new Date).toISOString().slice(0,10),source_type:"book",authors:O(source.authors)})})),m.a.currentSource=m.a.sources[0]);case 48:e.searchHint="Here's your results.",clearTimeout(e.sourceLoadingTimeout),e.sourceLoading=!1,m.a.getNewCitation();case 52:case"end":return t.stop()}}),t,null,[[8,15],[24,30],[38,44]])})))()}}},P=(r(453),r(78)),component=Object(P.a)(A,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex flex-row",staticStyle:{width:"100%","justify-content":"center"}},[t(c.a,{directives:[{name:"debounce",rawName:"v-debounce:600ms",value:e.handleURLKey,expression:"handleURLKey",arg:"600ms"}],staticClass:"search-bar",attrs:{label:"Enter URL/Book Name","hide-details":"auto",hint:e.searchHint,autocomplete:"off",spellcheck:"false"},on:{input:e.typingHandle},scopedSlots:e._u([{key:"prepend",fn:function(){return[e.sourceLoading?t(o.a,{staticStyle:{width:"24px",height:"24px"},attrs:{indeterminate:"",color:"primary"}}):t(n.a,[e._v("\n                mdi-magnify\n            ")])]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);